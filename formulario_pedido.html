<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Pedido</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <style>

        body {
    background-color: #121212; /* Fondo oscuro */
    font-family: 'Arial', sans-serif;
    color: #e5e5e5;
    margin: 0;
    padding: 0;
}

.container {
    max-width: 600px;
    margin-top: 50px;
    background-color: #2a2a2a; /* Fondo oscuro */
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    color: #fff;
}

h1 {
    font-size: 2rem;
    margin-bottom: 20px;
    color: #ff4081; /* Color de acento rosa */
    font-weight: bold;
}

label {
    font-size: 1rem;
    margin-bottom: 5px;
    color: #e5e5e5;
}

input, textarea, select {
    background-color: #ffffff;
    color: #e5e5e5;
    border: 1px solid #444;
    border-radius: 8px;
    padding: 10px;
    width: 100%;
    margin-bottom: 15px;
    font-size: 1rem;
}

input::placeholder, textarea::placeholder {
    color: #bbb;
}

input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: #ff4081; /* Rosa al enfocar */
    background-color: #444;
}

button {
    background-color: #ff4081; /* Rosa brillante */
    color: #fff;
    border: none;
    padding: 12px;
    width: 100%;
    font-size: 1.2rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s;
}

button:hover {
    background-color: #e5006e; /* Tono más oscuro al pasar el ratón */
}

ul#order-summary {
    padding: 0;
    list-style-type: none;
    margin-bottom: 20px;
}

ul#order-summary li {
    background-color: #333;
    padding: 10px;
    margin: 5px 0;
    border-radius: 8px;
    color: #fff;
    font-size: 1rem;
}

ul#order-summary li:nth-child(even) {
    background-color: #333; /* Fondo alterno para las filas */
}

h5 {
    font-size: 1.25rem;
    margin-top: 20px;
    color: #ff4081; /* Acento rosa */
    font-weight: bold;
}
#customer-department {
    background-color: #ffffff; /* Fondo oscuro para mayor contraste */
    color: #4e4e4e; /* Texto blanco para que sea legible */
    border: 1px solid #ccc; /* Borde suave */
}

#customer-department option {
    background-color: #333; /* Fondo oscuro para las opciones */
    color: #fff; /* Texto blanco para las opciones */
}

#customer-department:focus {
    border-color: #5c6bc0; /* Cambio de borde al hacer foco */
}

    </style>
</head>
<body>
    <div class="container">
        <h1>Formulario de Pedido</h1>
        <form id="order-form">
            <div class="mb-3">
                <label for="customer-name" class="form-label">Nombre completo</label>
                <input type="text" id="customer-name" class="form-control" placeholder="Ingresa tu nombre" required>
            </div>
            <div class="mb-3">
                <label for="customer-email" class="form-label">Correo electrónico</label>
                <input type="email" id="customer-email" class="form-control" placeholder="Ingresa tu correo" required>
            </div>
            <div class="mb-3">
                <label for="customer-phone" class="form-label">Número de WhatsApp</label>
                <input type="tel" id="customer-phone" class="form-control" placeholder="Ingresa tu número de WhatsApp" required>
            </div>
            <div class="mb-3">
                <label for="customer-department" class="form-label">Departamento</label>
                <select id="customer-department" class="form-select" required>
                    <option value="">Selecciona un departamento</option>
                    <!-- Aquí van los departamentos -->
                    <option value="Amazonas">Amazonas</option>
                    <option value="Antioquia">Antioquia</option>
                    <option value="Arauca">Arauca</option>
                    <option value="Atlántico">Atlántico</option>
                    <option value="Bolívar">Bolívar</option>
                    <option value="Boyacá">Boyacá</option>
                    <option value="Caldas">Caldas</option>
                    <option value="Caquetá">Caquetá</option>
                    <option value="Casanare">Casanare</option>
                    <option value="Cauca">Cauca</option>
                    <option value="Cesar">Cesar</option>
                    <option value="Chocó">Chocó</option>
                    <option value="Córdoba">Córdoba</option>
                    <option value="Cundinamarca">Cundinamarca</option>
                    <option value="Guainía">Guainía</option>
                    <option value="Guaviare">Guaviare</option>
                    <option value="Huila">Huila</option>
                    <option value="La Guajira">La Guajira</option>
                    <option value="Magdalena">Magdalena</option>
                    <option value="Meta">Meta</option>
                    <option value="Nariño">Nariño</option>
                    <option value="Norte de Santander">Norte de Santander</option>
                    <option value="Putumayo">Putumayo</option>
                    <option value="Quindío">Quindío</option>
                    <option value="Risaralda">Risaralda</option>
                    <option value="Santander">Santander</option>
                    <option value="Sucre">Sucre</option>
                    <option value="Tolima">Tolima</option>
                    <option value="Valle del Cauca">Valle del Cauca</option>
                    <option value="Vaupés">Vaupés</option>
                    <option value="Vichada">Vichada</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="customer-city" class="form-label">Ciudad</label>
                <input type="text" id="customer-city" class="form-control" placeholder="Ingresa tu ciudad" required>
            </div>
            <div class="mb-3">
                <label for="customer-address" class="form-label">Dirección de la casa</label>
                <textarea id="customer-address" class="form-control" rows="3" placeholder="Ingresa tu dirección completa" required></textarea>
            </div>
            <h5>Resumen del Pedido</h5>
            <ul id="order-summary" class="list-group mb-3">
                <!-- Los productos se llenarán dinámicamente aquí -->
            </ul>
            <button type="submit" class="btn btn-success w-100">Enviar Pedido</button>
        </form>
    </div>

    <script>
        // Inicializar EmailJS
        (function() {
            emailjs.init('d-fR1pEG4oWTsziPP'); // Reemplaza 'd-fR1pEG4oWTsziPP' con tu ID de usuario de EmailJS
        })();

        // Obtener datos del carrito almacenados en sessionStorage
        const cart = JSON.parse(sessionStorage.getItem('cart')) || [];
        const orderSummary = document.getElementById('order-summary');

        if (cart.length === 0) {
            orderSummary.innerHTML = '<li class="list-group-item">El carrito está vacío.</li>';
        } else {
            cart.forEach(item => {
                const listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.textContent = `${item.name} (x${item.quantity}) - $${(item.price * item.quantity).toFixed(2)}`;
                orderSummary.appendChild(listItem);
            });
        }

        // Manejar el envío del formulario
        document.getElementById('order-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const name = document.getElementById('customer-name').value;
            const email = document.getElementById('customer-email').value;
            const phone = document.getElementById('customer-phone').value;
            const department = document.getElementById('customer-department').value;
            const city = document.getElementById('customer-city').value;
            const address = document.getElementById('customer-address').value;

            // Crear el cuerpo del correo
            const orderDetails = cart.map(item => `${item.name} (x${item.quantity}) - $${(item.price * item.quantity).toFixed(2)}`).join('\n');

            const emailParams = {
                customer_name: name,
                customer_email: email,
                customer_phone: phone,
                customer_department: department,
                customer_city: city,
                customer_address: address,
                order_details: orderDetails
            };

            // Enviar el correo usando EmailJS
            emailjs.send('service_ny7sdps', 'template_nswdtnr', emailParams)
                .then(() => {
                    alert('Pedido enviado con éxito. Pronto nos pondremos en contacto contigo.');
                    sessionStorage.removeItem('cart'); // Limpiar el carrito
                    window.location.href = 'index.html'; // Redirigir a la página principal
                })
                .catch(error => {
                    console.error('Error al enviar el pedido:', error);
                    alert('Hubo un problema al enviar tu pedido. Intenta nuevamente.');
                });
        });
    </script>
</body>
</html>
